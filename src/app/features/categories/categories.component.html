<div class="p-4 md:p-6">
  <h1 class="text-2xl font-bold mb-6 text-gray-800">Manage Categories</h1>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

    <!-- Expense Categories Card -->
    <p-card>
      <ng-template pTemplate="title">
        <div class="flex justify-between items-center">
          <span>Expense Categories</span>
          <p-button icon="pi pi-plus-circle" styleClass="p-button-text p-button-primary" pTooltip="Add Expense Category" (click)="addCategory('expense')"></p-button>
        </div>
      </ng-template>
      @if ((expenseCategories$ | async); as categories) {
        @if (categories.length > 0) {
          <ul class="list-none p-0 m-0">
            @for (category of categories; track category.id; let last = $last) {
              <li class="flex items-center p-2">
                <i class="pi {{ category.icon || 'pi-tag' }} text-xl mr-3" [style.color]="category.color"></i>
                <div class="flex-1 font-medium">{{ category.name }}</div>
                <div class="flex items-center">
                  <p-button icon="pi pi-pencil" styleClass="p-button-text p-button-rounded" (click)="editCategory(category)"></p-button>
                  <p-button icon="pi pi-trash" styleClass="p-button-text p-button-rounded p-button-danger" (click)="deleteCategory(category)"></p-button>
                </div>
              </li>
              @if (!last) {
                <p-divider></p-divider>
              }
            }
          </ul>
        } @else {
          <div class="text-center text-gray-500 p-4">No expense categories yet.</div>
        }
      }
    </p-card>

    <!-- Income Categories Card -->
    <p-card>
      <ng-template pTemplate="title">
        <div class="flex justify-between items-center">
          <span>Income Categories</span>
          <p-button icon="pi pi-plus-circle" styleClass="p-button-text p-button-primary" pTooltip="Add Income Category" (click)="addCategory('income')"></p-button>
        </div>
      </ng-template>
      @if ((incomeCategories$ | async); as categories) {
        @if (categories.length > 0) {
          <ul class="list-none p-0 m-0">
            @for (category of categories; track category.id; let last = $last) {
              <li class="flex items-center p-2">
                <i class="pi {{ category.icon || 'pi-tag' }} text-xl mr-3" [style.color]="category.color"></i>
                <div class="flex-1 font-medium">{{ category.name }}</div>
                <div class="flex items-center">
                  <p-button icon="pi pi-pencil" styleClass="p-button-text p-button-rounded" (click)="editCategory(category)"></p-button>
                  <p-button icon="pi pi-trash" styleClass="p-button-text p-button-rounded p-button-danger" (click)="deleteCategory(category)"></p-button>
                </div>
              </li>
              @if (!last) {
                <p-divider></p-divider>
              }
            }
          </ul>
        } @else {
          <div class="text-center text-gray-500 p-4">No income categories yet.</div>
        }
      }
    </p-card>

  </div>
</div>